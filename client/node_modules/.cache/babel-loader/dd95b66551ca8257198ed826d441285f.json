{"ast":null,"code":"import Firebase, { db } from '../../services/firebase/FirebaseConfig'; //Firestore Refs\n\nconst adminRef = db.collection('user').doc('admin');\nconst usersRef = db.collection('user');\nexport const login = (dispatch, username, password, setLoading) => {\n  setLoading(true);\n  adminRef.get().then(firestoreDocument => {\n    if (!firestoreDocument.exists) {\n      alert(\"User does not exist.Please Signup below\");\n      setLoading(false);\n      return;\n    }\n\n    const user = firestoreDocument.data();\n    /*console.log(user)\n     === { \n         \"email\": \"admin@admin.com\",\n         \"fullName\": \"admin\",\n         \"id\": \"jWB4mPqXQDVdSZRzNeRUriGa8A92\" \n        }\n    */\n\n    if (user.username === username & user.password === password) {\n      dispatch({\n        type: 'GET_CURRENT_USER',\n        payload: user\n      });\n      setLoading(false);\n      window.location = '/allclassSection';\n    } else if (user.username !== username || user.password !== password) {\n      alert('Wrong Password or Username');\n      setLoading(false);\n    }\n  }).catch(error => {\n    alert(error.message);\n    setLoading(false);\n    console.log(error);\n  });\n}; // export const login = (dispatch, email, password, setError, setLoading, navigation) => {\n//     setError('')\n//     Firebase.auth().signInWithEmailAndPassword(email, password)\n//         .then((response) => {\n//             const uid = response.user.uid\n//             usersRef.doc(uid).get()\n//                 .then(firestoreDocument => {\n//                     if (!firestoreDocument.exists) {\n//                         setError(\"User does not exist.Please Signup below\")\n//                         setLoading(false)\n//                         return;\n//                     }\n//                     const user = firestoreDocument.data()\n//                     /*console.log(user)\n//                      === { \n//                          \"email\": \"admin@admin.com\",\n//                          \"fullName\": \"admin\",\n//                          \"id\": \"jWB4mPqXQDVdSZRzNeRUriGa8A92\" \n//                         }\n//                     */\n//                     dispatch({\n//                         type: 'GET_CURRENT_USER',\n//                         payload: user\n//                     })\n//                     if (user.fullName === 'admin') {\n//                         navigation.reset({\n//                             index: 1,\n//                             routes: [{ name: 'Home' }, { name: 'Admin' }],\n//                         })\n//                     }\n//                     else {\n//                         navigation.reset({\n//                             index: 1,\n//                             routes: [{ name: 'Home' }, { name: 'Ordering' }],\n//                         })\n//                     }\n//                 })\n//                 .catch(error => {\n//                     setError('Login Failed. Please try again.')\n//                     setLoading(false)\n//                     console.log(error)\n//                 });\n//         })\n//         .catch(error => {\n//             //  setError('Login Failed. Please turn ON your internet connection.')\n//             setError(error.message)\n//             setLoading(false)\n//             console.log(error)\n//         })\n// }\n\nexport const singUp = (dispatch, fullName, email, password, section, setError, setLoading) => {\n  setError('');\n  Firebase.auth().createUserWithEmailAndPassword(email, password).then(response => {\n    const uid = response.user.uid;\n    const data = {\n      id: uid,\n      email,\n      fullName,\n      section\n    };\n    usersRef.doc(uid).set(data).then(() => {\n      dispatch({\n        type: 'GET_CURRENT_USER',\n        payload: data\n      });\n      window.location = '/allclassSection';\n    }).catch(error => {\n      setError('Registering Failed. Please try again.');\n      setLoading(false);\n      console.log(error);\n    });\n  }).catch(error => {\n    // setError('Login Failed. Please turn ON your internet connection.')\n    setLoading(false);\n    setError(error.message);\n    console.log(error);\n  });\n};","map":{"version":3,"sources":["/home/abdulhafiz/PROJECTS/REACT_PROJECTS/Ramat_Bello_B.Sc_Project/client/src/AppStore/actions/UserActions.js"],"names":["Firebase","db","adminRef","collection","doc","usersRef","login","dispatch","username","password","setLoading","get","then","firestoreDocument","exists","alert","user","data","type","payload","window","location","catch","error","message","console","log","singUp","fullName","email","section","setError","auth","createUserWithEmailAndPassword","response","uid","id","set"],"mappings":"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","sourcesContent":["import Firebase, { db } from '../../services/firebase/FirebaseConfig'\n\n//Firestore Refs\nconst adminRef = db.collection('user').doc('admin')\nconst usersRef = db.collection('user')\n\n\n\nexport const login = (dispatch, username, password, setLoading) => {\n    setLoading(true)\n    adminRef.get()\n        .then(firestoreDocument => {\n            if (!firestoreDocument.exists) {\n                alert(\"User does not exist.Please Signup below\")\n                setLoading(false)\n                return;\n            }\n            const user = firestoreDocument.data()\n\n            /*console.log(user)\n             === { \n                 \"email\": \"admin@admin.com\",\n                 \"fullName\": \"admin\",\n                 \"id\": \"jWB4mPqXQDVdSZRzNeRUriGa8A92\" \n                }\n            */\n\n            if (user.username === username & user.password === password) {\n                dispatch({\n                    type: 'GET_CURRENT_USER',\n                    payload: user\n                })\n                setLoading(false)\n                window.location = '/allclassSection'\n            }\n            else if (user.username !== username || user.password !== password) {\n                alert('Wrong Password or Username')\n                setLoading(false)\n            }\n        })\n        .catch(error => {\n            alert(error.message)\n            setLoading(false)\n            console.log(error)\n        });\n\n\n}\n\n\n// export const login = (dispatch, email, password, setError, setLoading, navigation) => {\n//     setError('')\n//     Firebase.auth().signInWithEmailAndPassword(email, password)\n//         .then((response) => {\n//             const uid = response.user.uid\n//             usersRef.doc(uid).get()\n//                 .then(firestoreDocument => {\n//                     if (!firestoreDocument.exists) {\n//                         setError(\"User does not exist.Please Signup below\")\n//                         setLoading(false)\n//                         return;\n//                     }\n//                     const user = firestoreDocument.data()\n\n//                     /*console.log(user)\n//                      === { \n//                          \"email\": \"admin@admin.com\",\n//                          \"fullName\": \"admin\",\n//                          \"id\": \"jWB4mPqXQDVdSZRzNeRUriGa8A92\" \n//                         }\n//                     */\n//                     dispatch({\n//                         type: 'GET_CURRENT_USER',\n//                         payload: user\n//                     })\n//                     if (user.fullName === 'admin') {\n//                         navigation.reset({\n//                             index: 1,\n//                             routes: [{ name: 'Home' }, { name: 'Admin' }],\n//                         })\n\n//                     }\n//                     else {\n//                         navigation.reset({\n//                             index: 1,\n//                             routes: [{ name: 'Home' }, { name: 'Ordering' }],\n//                         })\n//                     }\n//                 })\n//                 .catch(error => {\n//                     setError('Login Failed. Please try again.')\n//                     setLoading(false)\n//                     console.log(error)\n//                 });\n//         })\n//         .catch(error => {\n//             //  setError('Login Failed. Please turn ON your internet connection.')\n//             setError(error.message)\n//             setLoading(false)\n//             console.log(error)\n//         })\n// }\n\nexport const singUp = (dispatch, fullName, email, password, section, setError, setLoading) => {\n    setError('')\n    Firebase.auth().createUserWithEmailAndPassword(email, password)\n        .then((response) => {\n            const uid = response.user.uid\n            const data = {\n                id: uid,\n                email,\n                fullName,\n                section,\n\n            };\n            usersRef.doc(uid).set(data)\n                .then(() => {\n                    dispatch({\n                        type: 'GET_CURRENT_USER',\n                        payload: data\n                    })\n                    window.location = '/allclassSection'\n                })\n                .catch((error) => {\n                    setError('Registering Failed. Please try again.')\n                    setLoading(false)\n                    console.log(error)\n                });\n        })\n        .catch((error) => {\n            // setError('Login Failed. Please turn ON your internet connection.')\n            setLoading(false)\n            setError(error.message)\n            console.log(error)\n        });\n}\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}