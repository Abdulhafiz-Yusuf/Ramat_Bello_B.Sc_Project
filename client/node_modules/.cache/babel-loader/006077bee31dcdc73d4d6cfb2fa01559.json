{"ast":null,"code":"import Firebase, { db } from '../../services/firebase/FirebaseConfig'; //Firestore Refs\n\nconst adminRef = db.collection('user').doc('admin');\nconst usersRef = db.collection('user');\nexport const login = (dispatch, email, password, setError, setLoading, navigation) => {\n  setError('');\n  Firebase.auth().signInWithEmailAndPassword(email, password).then(response => {\n    const uid = response.user.uid;\n    usersRef.doc(uid).get().then(firestoreDocument => {\n      if (!firestoreDocument.exists) {\n        setError(\"User does not exist.Please Signup below\");\n        setLoading(false);\n        return;\n      }\n\n      const user = firestoreDocument.data();\n      /*console.log(user)\n       === { \n           \"email\": \"admin@admin.com\",\n           \"fullName\": \"admin\",\n           \"id\": \"jWB4mPqXQDVdSZRzNeRUriGa8A92\" \n          }\n      */\n\n      dispatch({\n        type: 'GET_CURRENT_USER',\n        payload: user\n      });\n\n      if (user.fullName === 'admin') {\n        navigation.reset({\n          index: 1,\n          routes: [{\n            name: 'Home'\n          }, {\n            name: 'Admin'\n          }]\n        });\n      } else {\n        navigation.reset({\n          index: 1,\n          routes: [{\n            name: 'Home'\n          }, {\n            name: 'Ordering'\n          }]\n        });\n      }\n    }).catch(error => {\n      setError('Login Failed. Please try again.');\n      setLoading(false);\n      console.log(error);\n    });\n  }).catch(error => {\n    //  setError('Login Failed. Please turn ON your internet connection.')\n    setError(error.message);\n    setLoading(false);\n    console.log(error);\n  });\n};\nexport const singUp = (dispatch, fullName, email, password, section, setError, setLoading) => {\n  setError('');\n  Firebase.auth().createUserWithEmailAndPassword(email, password).then(response => {\n    const uid = response.user.uid;\n    const data = {\n      id: uid,\n      email,\n      fullName,\n      section\n    };\n    usersRef.doc(uid).set(data).then(() => {\n      dispatch({\n        type: 'GET_CURRENT_USER',\n        payload: data\n      });\n      window.location = '/allclassSection';\n    }).catch(error => {\n      setError('Registering Failed. Please try again.');\n      setLoading(false);\n      console.log(error);\n    });\n  }).catch(error => {\n    // setError('Login Failed. Please turn ON your internet connection.')\n    setLoading(false);\n    setError(error.message);\n    console.log(error);\n  });\n};","map":{"version":3,"sources":["/home/abdulhafiz/PROJECTS/REACT_PROJECTS/Ramat_Bello_B.Sc_Project/client/src/ContextAPI/actions/UserActions.js"],"names":["Firebase","db","adminRef","collection","doc","usersRef","login","dispatch","email","password","setError","setLoading","navigation","auth","signInWithEmailAndPassword","then","response","uid","user","get","firestoreDocument","exists","data","type","payload","fullName","reset","index","routes","name","catch","error","console","log","message","singUp","section","createUserWithEmailAndPassword","id","set","window","location"],"mappings":"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","sourcesContent":["import Firebase, { db } from '../../services/firebase/FirebaseConfig'\n\n//Firestore Refs\nconst adminRef = db.collection('user').doc('admin')\nconst usersRef = db.collection('user')\n\nexport const login = (dispatch, email, password, setError, setLoading, navigation) => {\n    setError('')\n    Firebase.auth().signInWithEmailAndPassword(email, password)\n        .then((response) => {\n            const uid = response.user.uid\n            usersRef.doc(uid).get()\n                .then(firestoreDocument => {\n                    if (!firestoreDocument.exists) {\n                        setError(\"User does not exist.Please Signup below\")\n                        setLoading(false)\n                        return;\n                    }\n                    const user = firestoreDocument.data()\n\n                    /*console.log(user)\n                     === { \n                         \"email\": \"admin@admin.com\",\n                         \"fullName\": \"admin\",\n                         \"id\": \"jWB4mPqXQDVdSZRzNeRUriGa8A92\" \n                        }\n                    */\n                    dispatch({\n                        type: 'GET_CURRENT_USER',\n                        payload: user\n                    })\n                    if (user.fullName === 'admin') {\n                        navigation.reset({\n                            index: 1,\n                            routes: [{ name: 'Home' }, { name: 'Admin' }],\n                        })\n\n                    }\n                    else {\n                        navigation.reset({\n                            index: 1,\n                            routes: [{ name: 'Home' }, { name: 'Ordering' }],\n                        })\n                    }\n                })\n                .catch(error => {\n                    setError('Login Failed. Please try again.')\n                    setLoading(false)\n                    console.log(error)\n                });\n        })\n        .catch(error => {\n            //  setError('Login Failed. Please turn ON your internet connection.')\n            setError(error.message)\n            setLoading(false)\n            console.log(error)\n        })\n}\n\nexport const singUp = (dispatch, fullName, email, password, section, setError, setLoading) => {\n    setError('')\n    Firebase.auth().createUserWithEmailAndPassword(email, password)\n        .then((response) => {\n            const uid = response.user.uid\n            const data = {\n                id: uid,\n                email,\n                fullName,\n                section,\n\n            };\n            usersRef.doc(uid).set(data)\n                .then(() => {\n                    dispatch({\n                        type: 'GET_CURRENT_USER',\n                        payload: data\n                    })\n                    window.location = '/allclassSection'\n                })\n                .catch((error) => {\n                    setError('Registering Failed. Please try again.')\n                    setLoading(false)\n                    console.log(error)\n                });\n        })\n        .catch((error) => {\n            // setError('Login Failed. Please turn ON your internet connection.')\n            setLoading(false)\n            setError(error.message)\n            console.log(error)\n        });\n}\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}